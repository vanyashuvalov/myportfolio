/* ANCHOR: base_styles */
/* REUSED: Foundation styles for all components */
/* SCALED FOR: Performance optimization with contain property */

/* ANCHOR: base_styles */
/* REUSED: Foundation styles for all components */
/* SCALED FOR: Performance optimization with contain property */

html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

body {
  font-family: var(--font-family-primary);
  /* UPDATED COMMENTS: Multi-layer background system with gradient and dot texture */
  background: 
    /* Layer 2: Dot texture pattern (top layer) */
    radial-gradient(circle at center, rgba(0, 0, 0, 0.07) 1.5px, transparent 1.5px),
    /* Layer 1: Base gradient (bottom layer) */
    linear-gradient(180deg, #8A547D 0%, #A76697 100%);
  
  /* REUSED: Background positioning and sizing for layered effect */
  background-size: 
    16px 16px,           /* Dot pattern grid size */
    100% 100%;           /* Gradient covers full area */
  
  background-position: 
    0 0,                 /* Dot pattern from top-left */
    center center;       /* Gradient centered */
  
  background-repeat: 
    repeat,              /* Dot pattern repeats */
    no-repeat;           /* Gradient doesn't repeat */
  
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  user-select: none;
  color: var(--color-primary);
  position: relative;
}

/* ANCHOR: mountain_overlay */
/* UPDATED COMMENTS: Mountain silhouette with 30% opacity using pseudo-element */
/* CRITICAL: Hidden during loading, shown after content is ready */
body::before {
  content: '';
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('../assets/images/bg-mountains.jpg') bottom center / 100% auto no-repeat;
  opacity: 0;
  pointer-events: none;
  z-index: 0;
  /* SCALED FOR: Mountain layer with proper blend mode */
  mix-blend-mode: darken;
  transition: opacity 0.5s ease-in;
}

/* REUSED: Show mountains after loading is complete */
body.loaded::before {
  opacity: 0.3;
}

/* ANCHOR: desktop_canvas */
/* UPDATED COMMENTS: Fullscreen canvas container with perfect flexbox centering */
/* CRITICAL: Always visible, but content inside fades in after loading */
.desktop-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: 2;
  /* CRITICAL: Perfect flexbox centering */
  display: flex;
  align-items: center;
  justify-content: center;
  /* UPDATED COMMENTS: Ensure flexbox works properly */
  flex-direction: column;
  /* SCALED FOR: Proper containment without interfering with flexbox */
  contain: layout style;
}

/* CRITICAL: Widgets inside canvas are hidden during loading */
.desktop-canvas .workspace-container {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.5s ease-in, visibility 0.5s ease-in;
}

/* CRITICAL: Show workspace after loading is complete */
body.loaded .desktop-canvas .workspace-container {
  opacity: 1;
  visibility: visible;
}

/* ANCHOR: workspace_container */
/* REUSED: Centralized workspace wrapper for all widgets */
/* SCALED FOR: Invisible workspace container without visual elements */
.workspace-container {
  /* CRITICAL: Flex item properties for proper centering */
  flex-shrink: 0;
  position: relative;
  /* UPDATED COMMENTS: Full-screen workspace with 10px margins on all sides */
  width: calc(100vw - 20px);
  height: calc(100vh - 20px);
  /* CRITICAL: Remove restrictive max/min dimensions for full utilization */
  max-width: none;
  max-height: none;
  min-width: 320px;
  min-height: 240px;
  /* UPDATED COMMENTS: Invisible workspace - no visual elements */
  border: none;
  border-radius: 0;
  background: transparent;
  backdrop-filter: none;
  /* CRITICAL: Internal coordinate system for widgets */
  overflow: visible;
  /* CRITICAL: Force dimensions and remove any padding/margin */
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  /* UPDATED COMMENTS: Ensure proper flex behavior */
}

/* ANCHOR: loading_system */
/* UPDATED COMMENTS: Full-screen loading overlay with gradient background */
/* CRITICAL: Covers entire viewport during initial load, stays visible until JS hides it */
.loading-indicator {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  z-index: 9999;
  /* REUSED: Same gradient background as body without mountains */
  background: 
    radial-gradient(circle at center, rgba(0, 0, 0, 0.07) 1.5px, transparent 1.5px),
    linear-gradient(180deg, #8A547D 0%, #A76697 100%);
  background-size: 
    16px 16px,
    100% 100%;
  background-position: 
    0 0,
    center center;
  background-repeat: 
    repeat,
    no-repeat;
  opacity: 1;
  visibility: visible;
  /* CRITICAL: Fade in on page load */
  animation: fadeIn 0.3s ease-in;
}

/* CRITICAL: Hide loading screen when content is ready */
/* UPDATED COMMENTS: Transition only applies when hiding, not on initial render */
.loading-indicator.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  /* REUSED: Smooth fade-out transition when hiding */
  transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
}

/* UPDATED COMMENTS: Simple circular spinner */
/* REUSED: Classic spinner animation */
.loading-spinner {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-top-color: white;
  margin-bottom: 20px;
  /* SCALED FOR: Smooth continuous rotation */
  animation: spin 0.8s linear infinite;
  /* CRITICAL: Fade in with parent */
  opacity: 0;
  animation: spin 0.8s linear infinite, fadeIn 0.5s ease-in 0.2s forwards;
}

/* CRITICAL: Simple rotation animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* REUSED: Fade in animation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.loading-indicator p {
  /* CRITICAL: System font for instant display without loading custom fonts */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-size: 14px;
  font-weight: 400;
  opacity: 0;
  margin: 0;
  letter-spacing: 0.5px;
  /* CRITICAL: Fade in after spinner */
  animation: fadeIn 0.5s ease-in 0.4s forwards;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ANCHOR: modal_system */
.modal-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal-backdrop);
  opacity: 0;
  visibility: hidden;
  transition: opacity var(--transition-normal), visibility var(--transition-normal);
}

.modal-container.modal-open {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background: var(--color-bg-primary);
  border-radius: 12px;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
  transform: scale(0.9);
  transition: transform var(--transition-normal);
  box-shadow: var(--shadow-xl);
}

.modal-container.modal-open .modal-content {
  transform: scale(1);
}

/* ANCHOR: utility_classes */
/* REUSED: Common utility classes for rapid development */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.no-scroll {
  overflow: hidden;
}

.pointer-events-none {
  pointer-events: none;
}

.pointer-events-auto {
  pointer-events: auto;
}