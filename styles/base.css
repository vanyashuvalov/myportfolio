/* ANCHOR: base_styles */
/* REUSED: Foundation styles for all components */
/* SCALED FOR: Performance optimization with contain property */

/* ANCHOR: base_styles */
/* REUSED: Foundation styles for all components */
/* SCALED FOR: Performance optimization with contain property */

html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  position: relative;
}

body {
  font-family: var(--font-family-primary);
  /* UPDATED COMMENTS: Solid dark background only */
  /* CRITICAL: Background moved to workspace-container for scroll behavior */
  background: #101010;
  
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  user-select: none;
  color: var(--color-primary);
  position: relative;
}

/* UPDATED COMMENTS: Background removed from body - now on workspace-container */
body.loaded {
  background: #101010;
  transition: background 0.5s ease-in;
}

/* ANCHOR: mountain_overlay */
/* UPDATED COMMENTS: Mountains removed from body - now on workspace-container */
body::before {
  display: none;
}

/* CRITICAL: Hide mountains and gradient when in page mode */
/* UPDATED COMMENTS: Show only solid #101010 background for project pages */
body.page-mode {
  background: #101010 !important;
}

body.page-mode::before {
  opacity: 0 !important;
}

/* ANCHOR: desktop_canvas */
/* UPDATED COMMENTS: Fullscreen canvas container with perfect flexbox centering */
/* CRITICAL: Always visible, but content inside fades in after loading */
/* SCALED FOR: Background scrolls with canvas on mobile */
.desktop-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 2;
  /* CRITICAL: Perfect flexbox centering */
  display: flex;
  align-items: center;
  justify-content: center;
  /* UPDATED COMMENTS: Ensure flexbox works properly */
  flex-direction: column;
  /* CRITICAL: Solid dark background - gradient on workspace-container */
  background: #101010;
}

/* ANCHOR: canvas_mountain_overlay */
/* CRITICAL: Mountains removed from desktop-canvas - now on workspace-container */
.desktop-canvas::before {
  display: none;
}

/* CRITICAL: Widgets inside canvas are hidden during loading */
.desktop-canvas .workspace-container {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.5s ease-in, visibility 0.5s ease-in;
}

/* CRITICAL: Show workspace after loading is complete */
body.loaded .desktop-canvas .workspace-container {
  opacity: 1;
  visibility: visible;
}

/* ANCHOR: workspace_container */
/* REUSED: Centralized workspace wrapper for all widgets */
/* SCALED FOR: Gradient background on workspace for proper sizing */
/* UPDATED COMMENTS: Dimensions controlled by JS in desktop-canvas.js */
.workspace-container {
  /* CRITICAL: Flex item properties for proper centering */
  flex-shrink: 0;
  position: relative;
  /* CRITICAL: Gradient background on workspace-container */
  background: 
    radial-gradient(circle at center, rgba(0, 0, 0, 0.07) 1.5px, transparent 1.5px),
    linear-gradient(180deg, #8A547D 0%, #A76697 100%);
  background-size: 
    16px 16px,
    100% 100%;
  background-position: 
    0 0,
    center center;
  background-repeat: 
    repeat,
    no-repeat;
  /* CRITICAL: Internal coordinate system for widgets */
  overflow: visible;
  /* CRITICAL: Force dimensions and remove any padding/margin */
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  /* CRITICAL: NO z-index - it creates stacking context and blocks mix-blend-mode */
}

/* ANCHOR: workspace_mountain_overlay */
/* CRITICAL: Mountains at bottom of workspace-container, full workspace width */
/* UPDATED COMMENTS: Background positioned relative to workspace, not viewport */
/* CRITICAL: No z-index - positioned behind widgets by DOM order */
.workspace-container::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('../assets/images/bg-mountains.jpg');
  background-position: bottom center;
  background-size: 100% auto;
  background-repeat: no-repeat;
  opacity: 0;
  pointer-events: none;
  mix-blend-mode: darken;
  transition: opacity 0.5s ease-in;
}

/* CRITICAL: Show mountains after loading */
body.loaded .workspace-container::before {
  opacity: 0.3;
}



/* ANCHOR: mobile_canvas_adaptation */
/* UPDATED COMMENTS: Mobile canvas with touch pan/scroll */
/* SCALED FOR: Touch navigation on mobile devices */
@media (max-width: 768px) {
  .desktop-canvas {
    /* CRITICAL: Enable scrolling for oversized canvas */
    overflow: auto;
    /* REUSED: Smooth momentum scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    /* CRITICAL: Align content to top-left for natural scroll start */
    align-items: flex-start;
    justify-content: flex-start;
    /* SCALED FOR: Hardware-accelerated scrolling */
    will-change: scroll-position;
  }
  
  .workspace-container {
    /* CRITICAL: No padding - full edge-to-edge layout */
    padding: 0;
    box-sizing: border-box;
  }
}

/* ANCHOR: loading_system */
/* UPDATED COMMENTS: Full-screen loading overlay with solid dark background */
/* CRITICAL: Covers entire viewport during initial load, stays visible until JS hides it */
.loading-indicator {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  z-index: 9999;
  /* UPDATED COMMENTS: Solid #101010 background for loading screen */
  background: #101010;
  opacity: 1;
  visibility: visible;
  /* CRITICAL: Fade in on page load */
  animation: fadeIn 0.3s ease-in;
}

/* CRITICAL: Hide loading screen when content is ready */
/* UPDATED COMMENTS: Transition only applies when hiding, not on initial render */
.loading-indicator.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  /* REUSED: Smooth fade-out transition when hiding */
  transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
}

/* UPDATED COMMENTS: Simple circular spinner */
/* REUSED: Classic spinner animation */
.loading-spinner {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-top-color: white;
  margin-bottom: 20px;
  /* SCALED FOR: Smooth continuous rotation */
  animation: spin 0.8s linear infinite;
  /* CRITICAL: Fade in with parent */
  opacity: 0;
  animation: spin 0.8s linear infinite, fadeIn 0.5s ease-in 0.2s forwards;
}

/* CRITICAL: Simple rotation animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* REUSED: Fade in animation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.loading-indicator p {
  /* CRITICAL: System font for instant display without loading custom fonts */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-size: 14px;
  font-weight: 400;
  opacity: 0;
  margin: 0;
  letter-spacing: 0.5px;
  /* CRITICAL: Fade in after spinner */
  animation: fadeIn 0.5s ease-in 0.4s forwards;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ANCHOR: modal_system */
/* UPDATED COMMENTS: Modal styles moved to contact-modal.css for specificity */
/* CRITICAL FIX: Removed conflicting background that caused flash */

/* ANCHOR: utility_classes */
/* REUSED: Common utility classes for rapid development */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.no-scroll {
  overflow: hidden;
}

.pointer-events-none {
  pointer-events: none;
}

.pointer-events-auto {
  pointer-events: auto;
}