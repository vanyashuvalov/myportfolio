/* ANCHOR: base_styles */
/* REUSED: Foundation styles for all components */
/* SCALED FOR: Performance optimization with contain property */

/* ANCHOR: base_styles */
/* REUSED: Foundation styles for all components */
/* SCALED FOR: Performance optimization with contain property */

html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

body {
  font-family: var(--font-family-primary);
  /* UPDATED COMMENTS: Solid dark background during loading, gradient shown after */
  /* CRITICAL: Start with #101010, switch to gradient when loaded */
  background: #101010;
  
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  user-select: none;
  color: var(--color-primary);
  position: relative;
}

/* UPDATED COMMENTS: Show gradient background after loading */
body.loaded {
  /* REUSED: Multi-layer background system with gradient and dot texture */
  background: 
    /* Layer 2: Dot texture pattern (top layer) */
    radial-gradient(circle at center, rgba(0, 0, 0, 0.07) 1.5px, transparent 1.5px),
    /* Layer 1: Base gradient (bottom layer) */
    linear-gradient(180deg, #8A547D 0%, #A76697 100%);
  
  /* REUSED: Background positioning and sizing for layered effect */
  background-size: 
    16px 16px,           /* Dot pattern grid size */
    100% 100%;           /* Gradient covers full area */
  
  background-position: 
    0 0,                 /* Dot pattern from top-left */
    center center;       /* Gradient centered */
  
  background-repeat: 
    repeat,              /* Dot pattern repeats */
    no-repeat;           /* Gradient doesn't repeat */
  
  transition: background 0.5s ease-in;
}

/* ANCHOR: mountain_overlay */
/* UPDATED COMMENTS: Mountain silhouette with 30% opacity using pseudo-element */
/* CRITICAL: Hidden during loading, shown after content is ready */
body::before {
  content: '';
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: 100%;
  background: url('../assets/images/bg-mountains.jpg') bottom center / 100% auto no-repeat;
  /* UPDATED COMMENTS: Minimum width to prevent mountains from becoming too narrow */
  min-width: 1000px;
  opacity: 0;
  pointer-events: none;
  z-index: 0;
  /* SCALED FOR: Mountain layer with proper blend mode */
  mix-blend-mode: darken;
  transition: opacity 0.5s ease-in;
}

/* REUSED: Show mountains after loading is complete */
body.loaded::before {
  opacity: 0.3;
}

/* CRITICAL: Hide mountains and gradient when in page mode */
/* UPDATED COMMENTS: Show only solid #101010 background for project pages */
body.page-mode {
  background: #101010 !important;
}

body.page-mode::before {
  opacity: 0 !important;
}

/* ANCHOR: desktop_canvas */
/* UPDATED COMMENTS: Fullscreen canvas container with perfect flexbox centering */
/* CRITICAL: Always visible, but content inside fades in after loading */
.desktop-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: 2;
  /* CRITICAL: Perfect flexbox centering */
  display: flex;
  align-items: center;
  justify-content: center;
  /* UPDATED COMMENTS: Ensure flexbox works properly */
  flex-direction: column;
  /* SCALED FOR: Proper containment without interfering with flexbox */
  contain: layout style;
}

/* CRITICAL: Widgets inside canvas are hidden during loading */
.desktop-canvas .workspace-container {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.5s ease-in, visibility 0.5s ease-in;
}

/* CRITICAL: Show workspace after loading is complete */
body.loaded .desktop-canvas .workspace-container {
  opacity: 1;
  visibility: visible;
}

/* ANCHOR: workspace_container */
/* REUSED: Centralized workspace wrapper for all widgets */
/* SCALED FOR: Invisible workspace container without visual elements */
/* UPDATED COMMENTS: Dimensions controlled by JS in desktop-canvas.js */
.workspace-container {
  /* CRITICAL: Flex item properties for proper centering */
  flex-shrink: 0;
  position: relative;
  /* UPDATED COMMENTS: Invisible workspace - no visual elements */
  border: none;
  border-radius: 0;
  background: transparent;
  backdrop-filter: none;
  /* CRITICAL: Internal coordinate system for widgets */
  overflow: visible;
  /* CRITICAL: Force dimensions and remove any padding/margin */
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

/* ANCHOR: mobile_canvas_adaptation */
/* UPDATED COMMENTS: Mobile canvas with touch pan/scroll */
/* SCALED FOR: Touch navigation on mobile devices */
@media (max-width: 768px) {
  .desktop-canvas {
    /* CRITICAL: Enable scrolling for oversized canvas */
    overflow: auto;
    /* REUSED: Smooth momentum scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    /* CRITICAL: Align content to top-left for natural scroll start */
    align-items: flex-start;
    justify-content: flex-start;
    /* SCALED FOR: Hardware-accelerated scrolling */
    will-change: scroll-position;
  }
  
  .workspace-container {
    /* CRITICAL: Add padding for comfortable edge scrolling */
    padding: 20px;
    box-sizing: border-box;
  }
}

/* ANCHOR: loading_system */
/* UPDATED COMMENTS: Full-screen loading overlay with solid dark background */
/* CRITICAL: Covers entire viewport during initial load, stays visible until JS hides it */
.loading-indicator {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  z-index: 9999;
  /* UPDATED COMMENTS: Solid #101010 background for loading screen */
  background: #101010;
  opacity: 1;
  visibility: visible;
  /* CRITICAL: Fade in on page load */
  animation: fadeIn 0.3s ease-in;
}

/* CRITICAL: Hide loading screen when content is ready */
/* UPDATED COMMENTS: Transition only applies when hiding, not on initial render */
.loading-indicator.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  /* REUSED: Smooth fade-out transition when hiding */
  transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
}

/* UPDATED COMMENTS: Simple circular spinner */
/* REUSED: Classic spinner animation */
.loading-spinner {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-top-color: white;
  margin-bottom: 20px;
  /* SCALED FOR: Smooth continuous rotation */
  animation: spin 0.8s linear infinite;
  /* CRITICAL: Fade in with parent */
  opacity: 0;
  animation: spin 0.8s linear infinite, fadeIn 0.5s ease-in 0.2s forwards;
}

/* CRITICAL: Simple rotation animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* REUSED: Fade in animation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.loading-indicator p {
  /* CRITICAL: System font for instant display without loading custom fonts */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-size: 14px;
  font-weight: 400;
  opacity: 0;
  margin: 0;
  letter-spacing: 0.5px;
  /* CRITICAL: Fade in after spinner */
  animation: fadeIn 0.5s ease-in 0.4s forwards;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ANCHOR: modal_system */
/* UPDATED COMMENTS: Modal styles moved to contact-modal.css for specificity */
/* CRITICAL FIX: Removed conflicting background that caused flash */

/* ANCHOR: utility_classes */
/* REUSED: Common utility classes for rapid development */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.no-scroll {
  overflow: hidden;
}

.pointer-events-none {
  pointer-events: none;
}

.pointer-events-auto {
  pointer-events: auto;
}